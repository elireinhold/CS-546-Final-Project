<h1>{{event.eventName}}</h1>

<p><strong>Borough:</strong> {{event.eventBorough}}</p>
<p><strong>Location:</strong> {{event.eventLocation}}</p>
<p><strong>Start:</strong> {{event.startDateTime}}</p>
<p><strong>End:</strong> {{event.endDateTime}}</p>

<hr>

<!-- Save Count -->
<p id="save-count-{{event._id}}">
  {{userCount}} user(s) saved this
</p>

<!-- Save / Unsave Button -->
{{#if saved}}
  <button 
    id="save-btn-{{event._id}}"
    data-event-id="{{event._id}}"
    data-saved="true"
  >
    Unsave
  </button>
{{else}}
  <button 
    id="save-btn-{{event._id}}"
    data-event-id="{{event._id}}"
    data-saved="false"
  >
    Save
  </button>
{{/if}}

<hr>

<a id="back-link" href="{{returnTo}}">â† Back to Results</a>

<script>
  const returnTo = "{{returnTo}}";
  // Prefer actual previous page; fall back to returnTo; default to search
  const backLink = document.getElementById("back-link");
  const fallback = returnTo || "/events/search";
  const target = document.referrer && document.referrer !== window.location.href
    ? document.referrer
    : fallback;
  backLink.setAttribute("href", target);
  backLink.addEventListener("click", (e) => {
    e.preventDefault();
    window.location.href = target;
  });
</script>
<script src="/public/js/eventDetails.js"></script>